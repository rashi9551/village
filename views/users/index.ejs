<!-- /*
* Bootstrap 5
* Template Name: Village
* Template Author: Untree.co
* Template URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Untree.co">
  <link rel="shortcut icon" href="favicon.png">
  <!-- Add this to include Tiny Slider CSS and JS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.3/tiny-slider.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.3/min/tiny-slider.js"></script>
<title>Home</title>


  <meta name="description" content="" />
  <meta name="keywords" content="bootstrap, bootstrap4" />
  <style>
body {
      background-color: #f8f9fa;
      color: #495057;
    }

    #container {
      margin-top: 50px;
    }

    .circular-buttons {
      text-align: center;
    }

    .circular-btn {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 50px;
		height: 50px;
		background-color: #ffffff;
		border-radius: 50%;
		margin: 0 10px;
		border: 2px solid #3b5d50;
		color: #3b5d50;
		font-size: 20px;
		text-decoration: none;
		transition: background-color 0.3s, color 0.3s;
    }

    .circular-btn:hover {
      background-color: #3b5d50;
      color: #ffffff;
    }

    .number-circle {
      width: 100px;
      height: 100px;
      background-color: #ffffff;
      border-radius: 50%;
      margin: 20px auto;
      border: 2px solid #3b5d50;
      color: #3b5d50;
      font-size: 24px;
      line-height: 100px;
      text-align: center;
      transition: background-color 0.3s, color 0.3s;
    }

    .number-circle:hover {
      background-color: #3b5d50;
      color: #ffffff;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {
        transform: translateY(0);
      }
      40% {
        transform: translateY(-20px);
      }
      60% {
        transform: translateY(-10px);
      }
    }

    .animated {
      animation: bounce 1s infinite;
    }




	/* Default style for select-line */
.select-line {
    background-color: #3b5d50;
}

/* Media query for small screens (e.g., mobile devices) */
@media (max-width: 767px) {
    .select-line {
        height: 8vw; /* Set the height for small screens */
		align-items: start;
		margin-top: 0.1px;
    }
}

/* Media query for medium screens (e.g., tablets) */
@media (min-width: 768px) and (max-width: 991px) {
    .select-line {
        height: 6vw; /* Set the height for medium screens */
    }
}

/* Media query for large screens (e.g., desktops) */
@media (min-width: 992px) {
    .select-line {
        height: 4vw; /* Set the height for large screens */
    }
}




	.sliderimg{
		height: 37vw;
		object-fit: cover;
	}
    .category-options {
      display: none;
    }
    .search-bar {
      background-color: #3b5d50;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 35px;
      margin: 0;
      display: flex;
      border: 2px solid #efeeee;
      border-radius: 30px;
      overflow: hidden;
    }

    .search-input {
      border: none;
      padding: 10px;
      background-color: #3b5d50;
      color: white;
    }
	@media (min-width: 1200px) {
  /* Set the width to 110vh for devices with a minimum width of 1200px */
  .search-input {
    width: 110vh;
  }
}

    .search-button {
      background-color: #3d5d50;
      color: white;
      border: none;
      padding: 10px;
      border-top-right-radius: 20px;
      border-bottom-right-radius: 20px;
      cursor: pointer;
    }
  </style>

		<!-- Bootstrap CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
		<link href="css/tiny-slider.css" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet">
		<title>Village</title>
	</head>

	<body>

		<!-- Start Header/Navigation -->
		<%-include('userpartials/nav')%>
		
		<!-- End Header/Navigation -->

		<!-- Start Hero Section -->
			<%-include('userpartials/slider')%>
		<!-- End Hero Section -->

		<!-- Start Product Section -->
		<div class="product-section">
			<div class="container">
			  <div class="category-slider"> <!-- Match the container class here -->
				<% categories.filter(category => category.status !== false).forEach(category => { %>
				  <div class="product-item vertical">
					<a href="/shop?category=<%= category._id %>">
					  <h1 style="font-size: 5.3vw;" class="product-title"><%= category.name %></h1>
					</a>
				  </div>
				<% }); %>
			  </div>
			</div>
		  </div>
		<!-- End Product Section -->
		<div class="untree_co-section product-section before-footer-section">
		    <div class="container">
				<div class="row" id="product-container" >
					
					<% products.forEach(product => { %>
						<% if (product.status === true) { %>
						  <div class="col-md-4 col-lg-3 col-sm-6 mb-5 product-item">
							<a class="product-item" href="/singleproduct/<%= product._id %>" data-types="<%= product.type %>">
							  <img src="<%= product.images[0] %>" class="img-fluid product-thumbnail" style="width: 100%; height: 40vh;object-fit: cover;">
							  <h3 class="product-title"><%= product.name %></h3>
							  <strong class="product-price">₹<%= product.price.toFixed(2) %></strong>
							</a>
							<span class="icon-cross">
							  <a href="/addtocart/<%= product._id %>"><img src="images/cross.svg" class="img-fluid"></a>
							</span>
						  </div>
						<% } %>
					  <% }); %>
					  
					  
				  </div>
				  <div id="container" >
					<div class="circular-buttons">
					<% if(currentPage > 1)	{ %>
					  <a  class="circular-btn"  onclick="changePage('<%=currentPage%>',-1)"><i class="fas fa-angle-left"></i></a>
					<% } %>
					  <div class="number-circle animated"><%=currentPage%></div>
					<% if(currentPage < totalPages) { %>
					  <a  class="circular-btn" onclick="changePage('<%=currentPage%>',1)"><i class="fas fa-angle-right"></i></a>
					<% } %>
					</div>
				  </div>
				  
		    </div>
		</div>

		<!-- Start Why Choose Us Section -->
		<div class="why-choose-section">
			<div class="container">
				<div class="row justify-content-between">
					<div class="col-lg-6">
						<h2 class="section-title">Why Choose Us</h2>
						<p>Donec vitae odio quis nisl dapibus malesuada. Nullam ac aliquet velit. Aliquam vulputate velit imperdiet dolor tempor tristique.</p>

						<div class="row my-5">
							<div class="col-6 col-md-6">
								<div class="feature">
									<div class="icon">
										<img src="images/truck.svg" alt="Image" class="imf-fluid">
									</div>
									<h3>Fast &amp; Free Shipping</h3>
									<p>Donec vitae odio quis nisl dapibus malesuada. Nullam ac aliquet velit. Aliquam vulputate.</p>
								</div>
							</div>

							<div class="col-6 col-md-6">
								<div class="feature">
									<div class="icon">
										<img src="images/bag.svg" alt="Image" class="imf-fluid">
									</div>
									<h3>Easy to Shop</h3>
									<p>Donec vitae odio quis nisl dapibus malesuada. Nullam ac aliquet velit. Aliquam vulputate.</p>
								</div>
							</div>

							<div class="col-6 col-md-6">
								<div class="feature">
									<div class="icon">
										<img src="images/support.svg" alt="Image" class="imf-fluid">
									</div>
									<h3>24/7 Support</h3>
									<p>Donec vitae odio quis nisl dapibus malesuada. Nullam ac aliquet velit. Aliquam vulputate.</p>
								</div>
							</div>

							<div class="col-6 col-md-6">
								<div class="feature">
									<div class="icon">
										<img src="images/return.svg" alt="Image" class="imf-fluid">
									</div>
									<h3>Hassle Free Returns</h3>
									<p>Donec vitae odio quis nisl dapibus malesuada. Nullam ac aliquet velit. Aliquam vulputate.</p>
								</div>
							</div>

						</div>
					</div>

					<div class="col-lg-5">
						<div class="img-wrap">
							<img src="images/why-choose-us-img.jpg" alt="Image" class="img-fluid">
						</div>
					</div>

				</div>
			</div>
		</div>
		<!-- End Why Choose Us Section -->

		<!-- Start We Help Section -->
		
		<!-- End We Help Section -->

		<!-- Start Popular Product -->
		
		<!-- End Popular Product -->

		<!-- Start Testimonial Slider -->

		<!-- End Testimonial Slider -->

		<!-- Start Blog Section -->
		
		<!-- End Blog Section -->	

		<!-- Start Footer Section -->
		<%-include('userpartials/footer')%>
		
		<!-- End Footer Section -->	

		<!-- for pagination -->
		<script>
			async function changePage(currentPage,action){
				try {
					const response = await fetch('/pagination',{
						method:'POST',
						headers:{
							'Content-type':'application/json'
						},
						body:JSON.stringify({
							currentPage,
							action
						})
					})

					const data = await response.json();

					if(data){
						updateProductContainer(data.products);
						updatePaginationContainer(data.currentPage,data.totalPages);
					}
				} catch (error) {
					console.log("error while fetching pagination data",error)
				}
			}


			function updateProductContainer(products) {
				const productContainer = document.getElementById("product-container");
				productContainer.innerHTML = ""; // Corrected this line
				products.forEach(product => {
			if (product.status === true) { // Check if the product's status is true
				const newHTML = `
				<div class="col-md-4 col-lg-3 col-sm-6 mb-5 product-item">
					<a class="product-item" href="/singleproduct/${product._id}" data-types="${product.type}">
					<img src="${product.images[0]}" class="img-fluid product-thumbnail" style="width: 100%; height: 40vh; object-fit: cover;">
					<h3 class="product-title">${product.name}</h3>
					<strong class="product-price">₹${product.price.toFixed(2)}</strong>
					</a>
					<span class="icon-cross">
					<a href="/addtocart/${product._id}"><img src="images/cross.svg" class="img-fluid"></a>
					</span>
				</div>
				`;
				productContainer.innerHTML += newHTML; // Append only if the status is true
			}
			});

			}

			function updatePaginationContainer(currentPage,totalPages){
				let values=document.getElementById('container');
				values.innerHTML=" ";
				const leftArrow = currentPage > 1
                ? `<a  class="circular-btn"  onclick="changePage('${currentPage}',-1)"><i class="fas fa-angle-left"></i></a>`
                : '';

				const rightArrow = currentPage < totalPages
    ? `<a  class="circular-btn" onclick="changePage('${currentPage}',1)"><i class="fas fa-angle-right"></i></a>`
    : '';

            const paginationHTML = 
			`
                <div class="circular-buttons">
                    ${leftArrow}
                    <div class="number-circle animated">${currentPage}</div>
                    ${rightArrow}
                </div>
			`;


			values.innerHTML += paginationHTML
				
			}
		</script>
		<!--  pagination ends -->

		<script>
			document.addEventListener('DOMContentLoaded', function () {
			  var slider = tns({
				container: '.category-slider',
				items: 3,
				axis: 'horizontal', // Set the axis to vertical
				slideBy: 'page',
				autoplay: true, // Set to true for automatic sliding
				nav: false,
				controls:false,
				autoplayButtonOutput: false // Hide autoplay start/stop button

			  });
			});
		  </script>
		<script src="js/bootstrap.bundle.min.js"></script>
		<script src="js/tiny-slider.js"></script>
		<script src="js/custom.js"></script>
		<script src="js/togglenav.js"></script>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-GLhlTQ8iK1u6o9d6swnf7D90qwgwR4O/4XBDlB1Fm/E=" crossorigin="anonymous"></script>

		<script>
			document.addEventListener('DOMContentLoaded', function () {
				setInterval(function() {
					document.querySelector('.carousel-control-next').click();
				}, 10000);
			});
		</script>
		</body>

</html>
